<?phpfunction shn_mm_app_settings(){ global $global; global $conf;include_once $global['approot']."/inc/lib_form.inc";echo "<h1 align=center> App Store settings page</h1>";if(shn_mm_check_services()=="ok")	{		add_information(_t("Sahana App store connection successful"));			}	else	{	add_error("Please check your App store settings again and refresh this page");		}        $db=$global['db'];        $mod_query = "SELECT 'last_time', min( `time_stamp` ) FROM mm_cache ";	$res = $db->Execute($mod_query);	$result_array = $res->GetAssoc();        $last_time=$result_array['last_time'];        shn_form_fopen('register_cache',null, array('req_message'=>false));	shn_form_fsopen(_('Cache settings : '));	shn_form_label(_("cache last updated on : $last_time "));        echo "<br>";	shn_form_submit(_('Refresh cache'));	shn_form_fsclose();	shn_form_fclose();		shn_form_fopen('selective_cache_load',null, array('req_message'=>false));	shn_form_fsopen(_('Selective  modules cache refresh : '));	shn_mm_modules_load();	shn_form_submit(_('Refresh cache on selected modules'));	shn_form_fsclose();	shn_form_fclose();	}function shn_mm_cache_refresh(){echo "ok";	}function shn_mm_modules_load(){	global $global;	global $conf;	$db=$global['db'];	echo "<table><tr>";	echo "<th>"._('Module')."</th>";	echo "<th>"._('Refresh')."</th>";	echo "</tr>";	$mod_query = "SELECT module,status FROM modules  ";	$res = $db->Execute($mod_query);	$result_array = $res->GetAssoc();	foreach($result_array as $module=>$status)		{			include_once "../mod/$module/conf.inc";			$module_name=$conf['mod_'.$module.'_name'];			echo "<tr>";			echo "<th>$module_name</th>";			echo "<th><input type='checkbox' name='modules[]' value='$module'></th>";			echo "</tr>";		}	}function shn_mm_selective_cache_load(){$modules=array();$modules=$_POST['modules'];shn_mm_register_cache("false",$modules);}