/**
 * @name        Client Registry Service
 * @version     1.0
 * @package     crs
 * @author      Clayton Kramer <clayton.kramer@mail.cuny.edu>
 * @license	    http://www.gnu.org/copyleft/lesser.html GNU Lesser General Public License (LGPL)
 * @about       Developed by the CUNY School of Professional Studies for the New York City Office of Emergency Management
 * @link        https://www.sps.cuny.edu/about
 * @link        http://sahanafoundation.org
 */

DROP TABLE IF EXISTS `crs_group_details`;
DROP TABLE IF EXISTS `crs_med_alert`;
DROP TABLE IF EXISTS `crs_person_skills`;
DROP TABLE IF EXISTS `crs_person_to_language`;
DROP TABLE IF EXISTS `crs_language`;
DROP TABLE IF EXISTS `crs_person_to_group`;
DROP TABLE IF EXISTS `crs_common_relations`;
DROP TABLE IF EXISTS `crs_common_occupations`;
DROP TABLE IF EXISTS `crs_emerg_cont`;
DROP TABLE IF EXISTS `crs_pets`;

CREATE TABLE `crs_person_skills` (
  `p_uuid` varchar(128) NOT NULL,
  `skill` varchar(255) DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT '0000-00-00 00:00:00',
  `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`p_uuid`, `skill`),
  KEY `skill` (`skill`),
  KEY `fk_crs_person_skills_1` (`p_uuid`),
  CONSTRAINT `fk_crs_person_skills_1` FOREIGN KEY (`p_uuid`) REFERENCES `person_uuid` (`p_uuid`) ON DELETE NO ACTION ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


CREATE TABLE `crs_language` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `language` varchar(128) NOT NULL,
  `created_at` timestamp NULL DEFAULT '0000-00-00 00:00:00',
  `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `language` (`language`)
) ENGINE=InnoDB AUTO_INCREMENT=183 DEFAULT CHARSET=utf8;

LOCK TABLES `crs_language` WRITE;
INSERT INTO `crs_language` VALUES 
(1,'Abkhaz',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(2,'Afar',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(3,'Afrikaans',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(4,'Akan',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(5,'albanian',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(6,'Amharic',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(7,'Arabic',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(8,'Aragonese',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(9,'Armenian',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(10,'Assamese',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(11,'Avaric',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(12,'Avestan',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(13,'Aymara',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(14,'Azerbaijani',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(15,'Bambara',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(16,'Bashkir',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(17,'Basque',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(18,'Bearusian',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(19,'Bengali',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(20,'Bihari',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(21,'Bislama',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(22,'Bosnian',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(23,'Breton',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(24,'Bulgarian',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(25,'Burmese',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(26,'Catalan',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(27,'Chamoro',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(28,'Chechen',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(29,'Chichewa',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(30,'Chinese',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(31,'Chuvash',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(32,'Cornish',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(33,'Corsican',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(34,'Cree',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(35,'Croatian',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(36,'Czech',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(37,'Danish',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(38,'Divehi',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(39,'Dutch',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(40,'Dzongkha',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(41,'English',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(42,'Esperanto',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(43,'Estonian',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(44,'Ewe',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(45,'Faroese',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(46,'Fijian',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(47,'Finnish',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(48,'French',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(49,'Fula',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(139,'Gaelic',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(50,'Galician',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(51,'Georgian',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(52,'German',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(53,'Greek',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(54,'Guarani',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(55,'Gujarati',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(56,'Haitan',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(57,'Hausa',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(58,'Hebrew',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(59,'Herero',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(60,'Hindi',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(61,'Hiri Motu',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(62,'Hungarian',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(70,'Icelandic',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(69,'Ido',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(67,'Igbo',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(64,'Indonesian',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(63,'Interlingua',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(65,'Interlingue',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(72,'Inuktitut',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(68,'Inupiaq',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(66,'Irish',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(71,'Italian',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(73,'Japanese',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(74,'Javanese',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(75,'Kalaallisut',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(76,'Kannada',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(77,'Kanuri',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(78,'Kashmiri',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(79,'Khmer',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(80,'Kikuyu',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(81,'Kinyarwanda',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(129,'Kirundi',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(83,'Komi',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(84,'Kongo',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(85,'Korean',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(86,'Kurdish',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(87,'Kwanyama',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(82,'Kyrgyz',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(93,'Lao',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(88,'Latin',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(91,'Limburgish',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(92,'Lingala',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(94,'Lithuanian',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(95,'Luba-Katanga',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(90,'Luganda',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(89,'Luxembourgish',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(97,'Macedonian',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(98,'Malagasy',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(99,'Malay',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(100,'Malayalam',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(101,'Maltese',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(96,'Manx',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(102,'Maori',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(103,'Marathi',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(104,'Marshallese',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(105,'Mongolian',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(106,'Nauru',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(107,'Navajo',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(111,'Ndonga',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(110,'Nepali',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(109,'North Ndebele',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(135,'Northern Sami',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(108,'Norwegian',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(112,'Norwegian Nynorsk',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(113,'Nuosu',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(115,'Occitan',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(116,'Ojibwa',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(117,'Old Church Slavonic',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(119,'Oriya',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(118,'Oromo',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(120,'Ossetian',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(182,'other',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(122,'Pali',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(125,'Pashto',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(123,'Persian',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(124,'Polish',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(126,'Portuguese',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(121,'Punjabi',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(127,'Quechua',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(130,'Romanian',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(128,'Romansh',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(131,'Russian',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(136,'Samoan',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(137,'Sango',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(132,'Sanskrit',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(133,'Sardinian',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(138,'Serbian',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(140,'Shona',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(134,'Sindhi',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(141,'Sinhalese',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(142,'Slovak',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(143,'Slovene',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(144,'Somali',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(114,'South Ndebele',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(145,'Southern Sotho',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(146,'Spanish',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(147,'Sundanese',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(148,'Swahili',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(149,'Swati',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(150,'Swedish',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(158,'Tagalog',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(165,'Tahitian',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(153,'Tajik',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(151,'Tamil',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(163,'Tatar',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(152,'Telugu',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(154,'Thai',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(156,'Tibetan',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(155,'Tigrinya',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(160,'Tonga',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(162,'Tsonga',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(159,'Tswana',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(161,'Turkish',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(157,'Turkmen',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(164,'Twi',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(167,'Ukrainian',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(168,'Urdu',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(166,'Uyghur',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(169,'Uzbek',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(170,'Venda',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(171,'Vietnamese',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(172,'Volapuk',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(173,'Walloon',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(174,'Welsh',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(176,'Western Frisian',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(175,'Wolof',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(177,'Xhosa',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(178,'Yiddish',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(179,'Yoruba',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(180,'Zhuang',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(181,'Zulu',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP);
UNLOCK TABLES;


CREATE TABLE `crs_person_to_language` (
  `p_uuid` varchar(128) NOT NULL,
  `ordinal` int(11) NOT NULL,
  `language` int(11) NOT NULL,
  `created_at` timestamp NULL DEFAULT '0000-00-00 00:00:00',
  `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`p_uuid`,`ordinal`),
  KEY `fk_crs_person_to_language_1` (`p_uuid`),
  KEY `fk_crs_person_to_language_2` (`language`),
  CONSTRAINT `fk_crs_person_to_language_1` FOREIGN KEY (`p_uuid`) REFERENCES `person_uuid` (`p_uuid`) ON DELETE NO ACTION ON UPDATE CASCADE,
  CONSTRAINT `fk_crs_person_to_language_2` FOREIGN KEY (`language`) REFERENCES `crs_language` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


CREATE TABLE `crs_common_relations` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `relation` varchar(64) DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT '0000-00-00 00:00:00',
  `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `relation` (`relation`)
) ENGINE=InnoDB AUTO_INCREMENT=109 DEFAULT CHARSET=utf8;

LOCK TABLES `crs_common_relations` WRITE;
INSERT INTO `crs_common_relations` VALUES 
(1,'Aunt',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(2,'Assistant',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(3,'Half brother',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(4,'Brother-in-law',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(6,'Brother',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(7,'Brother\'s Wife',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(8,'Half sister',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(9,'Sister',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(11,'Sister-in-law',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(13,'Cousin',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(14,'Companion',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(15,'Daughter',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(16,'Daughter-in-law',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(17,'Father',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(18,'Father-in-law',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(21,'Great aunt',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(22,'Great grandchild',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(23,'Granddaughter',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(24,'Grandfather',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(25,'Grandmother',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(28,'Grandson',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(29,'Guest',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(30,'Great Uncle',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(31,'Grandson\'s wife',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(32,'Guardian',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(33,'Husband\'s brother',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(34,'Husband\'s sister',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(36,'Housekeeper',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(37,'Husband',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(39,'Infant',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(40,'Inmate',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(41,'Illegitimate son',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(55,'Mother-in-law',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(56,'Mother',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(59,'Niece',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(60,'Niece\'s husband',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(61,'Nephew',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(62,'Nurse',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(63,'Nephew\'s wife',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(66,'Partner',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(68,'Pupil',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(69,'Prisoner',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(70,'Patient',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(73,'Step-brother',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(74,'Step-sister',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(75,'Step-daughter',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(76,'Step-father',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(79,'Son-in-law',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(80,'Step-mother',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(81,'Son',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(83,'Step-son',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(84,'Schoolteacher',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(86,'Son\'s wife',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(90,'Teacher',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(91,'Tenant',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(94,'Uncle',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(95,'Visitor',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(98,'Wife\'s aunt',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(99,'Wife\'s brother',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(100,'Wife\'s sister',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(101,'Wife\'s daughter',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(102,'Wife\'s father',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(103,'Wife',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(105,'Wife\'s mother',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(106,'Wife\'s son',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
(108,'Wife\'s uncle',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP);
UNLOCK TABLES;


CREATE TABLE `crs_emerg_cont` (
 `p_uuid` varchar(128) NOT NULL,
 `name` VARCHAR(120) NULL,
 `phone` VARCHAR(45) NULL,
 `relationship` VARCHAR(120) NULL,
 `created_at` timestamp NULL DEFAULT '0000-00-00 00:00:00',
 `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
 PRIMARY KEY (`p_uuid`) ,
 INDEX `fk_crs_emerg_cont_1` (`p_uuid` ASC) ,
 CONSTRAINT `fk_crs_emerg_cont_1`
 FOREIGN KEY (`p_uuid` )
 REFERENCES `person_uuid` (`p_uuid` ) ON DELETE NO ACTION ON UPDATE CASCADE
 )
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


CREATE TABLE `crs_med_alert` (
 `p_uuid` varchar(128) NOT NULL ,
 `injury` TINYINT NULL ,
 `special_medical` TINYINT NULL ,
 `special_mental` TINYINT NULL ,
 `created_at` timestamp NULL DEFAULT '0000-00-00 00:00:00',
 `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
 PRIMARY KEY (`p_uuid`) ,
 INDEX `fk_crs_med_alert_1` (`p_uuid` ASC) ,
 CONSTRAINT `fk_crs_med_alert_1`
 FOREIGN KEY (`p_uuid` )
 REFERENCES `person_uuid` (`p_uuid` ) ON DELETE NO ACTION ON UPDATE CASCADE
)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;

CREATE TABLE `crs_person_to_group` (
  `p_uuid_1` varchar(60) NOT NULL,
  `p_uuid_2` varchar(60) DEFAULT NULL,
  `relation` int(11) DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT '0000-00-00 00:00:00',
  `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`p_uuid_1`),
  KEY `fk_crs_person_to_group_1` (`p_uuid_1`),
  KEY `fk_crs_person_to_group_2` (`p_uuid_2`),
  KEY `fk_crs_person_to_group_3` (`relation`),
  CONSTRAINT `fk_crs_person_to_group_3` FOREIGN KEY (`relation`) REFERENCES `crs_common_relations` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_crs_person_to_group_1` FOREIGN KEY (`p_uuid_1`) REFERENCES `person_uuid` (`p_uuid`) ON DELETE NO ACTION ON UPDATE CASCADE,
  CONSTRAINT `fk_crs_person_to_group_2` FOREIGN KEY (`p_uuid_2`) REFERENCES `person_uuid` (`p_uuid`) ON DELETE NO ACTION ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `crs_group_details` (
  `p_uuid` varchar(128) NOT NULL,
  `adults` int(11) DEFAULT NULL,
  `children` int(11) DEFAULT NULL,
  `infants` int(11) DEFAULT NULL,
  `unknown` int(11) DEFAULT NULL,
 `created_at` timestamp NULL DEFAULT '0000-00-00 00:00:00',
 `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`p_uuid`),
  UNIQUE KEY `p_uuid_UNIQUE` (`p_uuid`),
  KEY `fk_crs_group_details_1` (`p_uuid`),
  CONSTRAINT `fk_crs_group_details_1` FOREIGN KEY (`p_uuid`) REFERENCES `person_uuid` (`p_uuid`) ON DELETE NO ACTION ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


CREATE TABLE `crs_common_occupations` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `occupation` varchar(64) DEFAULT NULL,
 `created_at` timestamp NULL DEFAULT '0000-00-00 00:00:00',
 `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `occupation` (`occupation`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

LOCK TABLES `crs_common_occupations` WRITE;
INSERT INTO `crs_common_occupations` (occupation, created_at, updated_at) VALUES 
('Administrative Assistant I',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Administrative Assistant II',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Administrative Assistant III',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Administrative Assistant IV',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Administrative Assistant V',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Administrative Staff Assistant',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Administrative Staff Specialist',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Administrative Staff Specialist Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Agency Management Analyst',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Agency Management Analyst Lead',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Agency Management Analyst Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Data Entry Operator',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Data Entry Operator Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Executive Secretary',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Executive Secretary Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Legal Assistant',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Legal Assistant Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Library Assistant',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Office Manager',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Office Services Aide',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Office Services Assistant',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Office Services Specialist',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Office Services Supervisor',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Office Services Supervisor Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Personal Assistant',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Personal Assistant Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Photocopy Supervisor',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Photocopy Technician',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Photo-Typesetting Specialist',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Photo-Typesetting Supervisor',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Postal Aide',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Postal Aide Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Postal Assistant',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Public Relations Coordinator',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Public Relations Specialist',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Public Relations Specialist Assistant',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Receptionist',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Receptionist Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Secretary',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Secretary Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Translator',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Transportation Contract Administrator',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Transportation Contract Administrator Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Classification / Compensation Analyst',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Classification / Compensation Analyst Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Classification / Compensation Consultant',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('EEO Program Analyst',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('EEO Program Specialist',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Employee Relations Analyst',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Employee Relations Analyst Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Human Resources Assistant',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Human Resources Generalist',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Human Resources Generalist Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Personnel Analyst',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Personnel Analyst Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Personnel Practices Analyst',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Personnel Practices Analyst Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Personnel Practices Manager',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Policy Analyst',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Policy Analyst Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Program Support Technician',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Program Support Technician Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('State Procurement Specialist',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('State Procurement Specialist Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Technical Instructor',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Technical Instructor Coordinator',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Training and Development Coordinator',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Training and Development Coordinator Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Accountant',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Accountant Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Accounting Manager A',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Accounting Manager B',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Accounting Manager C',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Auditing - External Auditor',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Auditing - External Auditor Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Auditing - Internal Auditor',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Auditing - Internal Auditor Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Budget Analyst',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Budget Analyst Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Fiscal Assistant',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Fiscal Technician',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Fiscal Technician Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('CDL Driver',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Forklift Operator',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Forklift Operator Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Motor Vehicle Operator A',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Motor Vehicle Operator B',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Flagger / Laborer',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Grounds Worker',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Grounds Worker Lead',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Grounds Worker Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Groundskeeper / Landscaper',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Groundskeeper / Landscaper Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Heavy Industrial Materials Handler (Warehouseman)',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Heavy Industrial Materials Handler, Freezer (Warehouseman)',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Heavy Industrial Worker (General Laborer)',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Housekeeping Supervisor',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Housekeeping Supervisor Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Housekeeping Worker',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Housekeeping Worker Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Inventory Worker Light',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Light Industrial Worker (General Laborer)',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Packer',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Warehouse Specialist I',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Warehouse Specialist II',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Warehouse Specialist III',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Warehouse Worker I',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Warehouse Worker II',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Boiler Operator I',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Boiler Operator II',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Boiler Operator Senior I',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Boiler Operator Senior II',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Carpenter',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Carpenter Assistant',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Carpenter Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Electrician',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Electrician Assistant',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Electrician Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Electrician Supervisor Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Electronic Equipment Install & Repair Supervisor',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Electronic Equipment Install & Repair Technician',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Electronic Technician',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Electronic Technician Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Equipment Repair Supervisor',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Equipment Repair Technician',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Equipment Repair Technician Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('HVAC Installation & Repair Assistant',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('HVAC Installation & Repair Assistant Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Laboratory Mechanic',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Laboratory Mechanic Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Locksmith',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Maintenance Field Worker',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Mason Plasterer',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Mason Plasterer Assistant',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Mechanic',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Painter',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Plumber / Steamfitter',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Plumber / Steamfitter Assistant',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Printing Press Operator B',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Production Supervisor',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Radio Specialist',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Radio Specialist Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Sheet Metal Worker',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Sheet Metal Worker Assistant',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Sheet Metal Worker Lead',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Shipping / Receiving Clerk',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Storekeeper Assistant I',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Storekeeper Assistant II',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Storekeeper I',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Storekeeper II',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Storekeeper III',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Storekeeper Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Tool Room Assistant',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Tool Room Assistant Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Trades Utilities  Worker Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Trades Utility Worker',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Tradesman Helper',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Tradesman Helper Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Welder',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Welder Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Work Zone Safety Officer',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Agricultural Technician',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Agricultural Technician Lead',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Agricultural Technician Supervisor',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Analytical Chemist',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Analytical Chemist Assistant',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Analytical Chemist Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Asphalt Field Technician',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Asphalt Mix Technician III',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Bridge Design Drafter',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Bridge Design Drafter Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Cartographic Drafter',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Cartographic Drafter Assistant',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Cartographic Supervisor',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Engineering Design Drafting Specialist',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Engineering Design Drafting Supervisor',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Engineering Design Drafting Technician',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Engineering Drafting Technician',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Engineering Drafting Technician Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Environmental Engineer',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Environmental Engineer Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Environmental Program Analyst',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Environmental Program Planner',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Environmental Program Specialist',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Environmental Specialist - Field',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Environmental Specialist Senior - Field',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Environmental Technician',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Environmental Technician Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Hydraulic Cement Concrete Aggregate Technician',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Hydraulic Cement Concrete Field Technician',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Hydraulic Cement Concrete Strength Technician',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Laboratory Technician',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Laboratory Technician Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Residential Plan Reviewer',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Right of Way Technician',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Right of Way Technician Supervisor',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Safety Engineer',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Safety Engineer Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Soils & Aggregate Technician',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Soils & Aggregate Field Technician',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Title Examiner',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Traffic Controller',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Traffic Controller Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Traffic Engineer, PE',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Traffic Engineer',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Transportation Data Analyst',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Transportation Data Analyst Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Transportation Data Analyst Supervisor',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Transportation Data Technician',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Transportation District Utilities Specialist',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Transportation Engineering Technician -Survey',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Transportation Engineering Technician -Survey Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Transportation Engineering Technician -Survey Supervisor',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Transportation Materials Technician',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Transportation Materials Technician Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Transportation Materials Technician Specialist',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Transportation Materials Technician Supervisor',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Transportation Planning Specialist',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Transportation Planning Specialist Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Transportation Technical Program Coordinator',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Transportation Technical Support Coordinator',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Food Operations Assistant',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Food Operations Manager Assistant',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Food Production Worker',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Second Cook',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Second Cook Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Server',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Social Worker',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Support Enforcement Specialist',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Support Enforcement Specialist Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Utilization Review Analyst',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Utilization Review Analyst Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Audio Visual Technician',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Audio Visual Technician Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Graphic Artist',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Graphic Artist Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Graphic Designer',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Graphic Designer Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Photographer',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Photographer Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('TV / Video Production Specialist',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('TV / Video Production Technician',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Dispatcher/Police',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Security Guard',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Security Officer',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Economist',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP),
('Economist Senior',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP);
UNLOCK TABLES;



CREATE TABLE `crs_pets` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `p_uuid` varchar(128) NOT NULL,
  `pet_name` varchar(100) DEFAULT NULL,
  `type_of_pet` varchar(60) DEFAULT NULL,
  `sex` varchar(60) DEFAULT NULL,
  `age` int(11) DEFAULT NULL,
  `breed` varchar(60) DEFAULT NULL,
  `color` varchar(60) DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT '0000-00-00 00:00:00',
  `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `fk_crs_pets_1` (`p_uuid`),
  CONSTRAINT `fk_crs_pets_1` FOREIGN KEY (`p_uuid`) REFERENCES `person_uuid` (`p_uuid`) ON DELETE NO ACTION ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


DROP VIEW IF EXISTS crs_latest_ptf;
CREATE VIEW crs_latest_ptf
AS
SELECT 
    t1.p_uuid, 
    t1.facility_uuid, 
    t1.in_date, 
    t1.out_date, 
    f2.facility_name AS src_facility, 
    f3.facility_name AS dest_facility
FROM fms_person_to_facility t1
	INNER JOIN fms_facility f1 ON f1.facility_uuid = t1.facility_uuid
	LEFT JOIN fms_person_to_transfer ptt ON ptt.id = t1.transfer_id
	LEFT JOIN fms_facility f2 ON f2.facility_uuid = ptt.src_facility
	LEFT JOIN fms_facility f3 ON f3.facility_uuid = ptt.dest_facility
WHERE EXISTS (
  SELECT id FROM fms_person_to_facility t2 
  WHERE t2.p_uuid = t1.p_uuid
  GROUP BY t2.p_uuid
  HAVING (MAX(t2.in_date) = t1.in_date));

DROP VIEW IF EXISTS crs_client_search;
CREATE VIEW crs_client_search
AS
SELECT
  p.p_uuid,
  p.given_name,
  /*p.custom_name,*/
  p.family_name,
  /*p.full_name,*/
  p.incident_id,
  pd.birth_date,
  pd.years_old,
  /*pd.opt_country,*/
  /*pd.occupation,*/
  pd.opt_gender,
  ps.opt_status,
  ps.last_updated,
  ps.creation_time,
  c1.contact_value AS home_phone,
  c2.contact_value AS mobile_phone,
  c3.contact_value AS alt_phone,
  c4.contact_value AS email,
  c5.contact_value AS street_1,
  c6.contact_value AS street_2,
  c7.contact_value AS city,
  c8.contact_value AS state,
  c9.contact_value AS postal,
  ptf.in_date,
  CASE WHEN ps.opt_status = 'in' THEN NULL ELSE ptf.out_date END AS out_date,
  CASE WHEN ps.opt_status = 'trn' THEN NULL ELSE ptf.dest_facility END AS dest_facility,
  f.facility_uuid,
  f.facility_name,
  f.facility_code,
  f.facility_group,
  sl1.language AS altlang1,
  sl2.language AS altlang2,
  sl3.language AS altlang3,
  ec.name AS ec_name,
  ec.phone AS ec_phone,
  ec.relationship AS ec_relation,
  ma.injury,
  ma.special_medical,
  ma.special_mental,
  IFNULL(gd.adults,1) AS adults,
  IFNULL(gd.children,0) AS children,
  IFNULL(gd.infants,0) AS infants,
  IFNULL(gd.unknown,0) AS unknown,
  IFNULL(ptg.p_uuid_2, '') AS group_primary,
  (gd.adults + gd.children + gd.infants) AS group_count,
  cr.relation,
  IFNULL(p2.full_name, '') AS client_group_name
FROM person_uuid p
  INNER JOIN crs_person_to_group ptg ON p.p_uuid = ptg.p_uuid_1
  LEFT JOIN crs_common_relations cr ON ptg.relation = cr.id
  LEFT JOIN person_uuid p2 ON ptg.p_uuid_2 = p2.p_uuid
  LEFT JOIN person_details pd ON p.p_uuid = pd.p_uuid
  LEFT JOIN person_status ps ON p.p_uuid = ps.p_uuid
  LEFT JOIN contact c1 ON (c1.p_uuid = p.p_uuid AND c1.opt_contact_type = 'curr')
  LEFT JOIN contact c2 ON (c2.p_uuid = p.p_uuid AND c2.opt_contact_type = 'cmob')
  LEFT JOIN contact c3 ON (c3.p_uuid = p.p_uuid AND c3.opt_contact_type = 'calt')
  LEFT JOIN contact c4 ON (c4.p_uuid = p.p_uuid AND c4.opt_contact_type = 'email')
  LEFT JOIN contact c5 ON (c5.p_uuid = p.p_uuid AND c5.opt_contact_type = 'street_1')
  LEFT JOIN contact c6 ON (c6.p_uuid = p.p_uuid AND c6.opt_contact_type = 'street_2')
  LEFT JOIN contact c7 ON (c7.p_uuid = p.p_uuid AND c7.opt_contact_type = 'city')
  LEFT JOIN contact c8 ON (c8.p_uuid = p.p_uuid AND c8.opt_contact_type = 'state')
  LEFT JOIN contact c9 ON (c9.p_uuid = p.p_uuid AND c9.opt_contact_type = 'postal')
  LEFT JOIN crs_latest_ptf ptf ON p.p_uuid = ptf.p_uuid
  LEFT JOIN fms_facility f ON f.facility_uuid = ptf.facility_uuid
  LEFT JOIN crs_person_to_language pl1 ON p.p_uuid = pl1.p_uuid AND pl1.ordinal = 1
  LEFT JOIN crs_language sl1 ON pl1.language = sl1.id
  LEFT JOIN crs_person_to_language pl2 ON p.p_uuid = pl2.p_uuid AND pl2.ordinal = 2
  LEFT JOIN crs_language sl2 ON pl2.language = sl2.id
  LEFT JOIN crs_person_to_language pl3 ON p.p_uuid = pl3.p_uuid AND pl3.ordinal = 3
  LEFT JOIN crs_language sl3 ON pl3.language = sl3.id
  LEFT JOIN crs_emerg_cont ec ON p.p_uuid = ec.p_uuid
  LEFT JOIN crs_med_alert ma ON p.p_uuid = ma.p_uuid
  LEFT JOIN crs_group_details gd ON p.p_uuid = gd.p_uuid
/*WHERE ps.isdeleted = 0*/